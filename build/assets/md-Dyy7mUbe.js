import{b as r,o as u,w as t,g as l,ad as o,v as d,x as c,T as e}from"./modules/vue-C3wmdS3C.js";import{I as s}from"./slidev/default-DWjjwV1l.js";import{u as a,f as p}from"./slidev/context-Cv_S9V0q.js";import"./index-BsII1Axt.js";import"./modules/shiki-D3-9XqGl.js";const j={__name:"slides.md__slidev_12",setup(g){const{$clicksContext:i,$frontmatter:_}=a();return i.setup(),(m,n)=>(u(),r(s,d(c(e(p)(e(_),11))),{default:t(()=>n[0]||(n[0]=[l("h1",null,"核心模块 II: 点云融合 (3/3) - 置信度计算 (B) - 单帧贡献",-1),l("div",{class:"text-left"},[l("ul",null,[l("li",null,[l("strong",null,[o("计算单个邻居帧 "),l("code",null,"k"),o(" 的置信度贡献 "),l("code",null,"confidence_one_neighbor")]),o(": "),l("ol",null,[l("li",null,[o("将 "),l("code",null,"pointWorld_candidate"),o(" 投影到邻居帧 "),l("code",null,"k"),o(" 的图像上，得到投影坐标 "),l("code",null,"(u_proj_k, v_proj_k)"),o(" 和对应颜色 "),l("code",null,"neighbor_color_at_original_projection"),o("。")]),l("li",null,[o("计算参考颜色与此投影颜色的平方差和 (SSD): "),l("code",null,"ssd_original_depth_projection = SSD(original_color_at_uv, neighbor_color_at_original_projection)"),o("。这个值表示在原始深度假设下，参考点与邻居帧投影点的颜色差异。")]),l("li",null,[l("strong",null,"深度邻域最优性检查"),o(": "),l("ul",null,[l("li",null,[o("在参考帧当前采样点 "),l("code",null,"(u,v)"),o(" 的深度值 "),l("code",null,"current_metric_depth"),o(" (即 "),l("code",null,"pointWorld_candidate"),o(" 对应的深度) 附近，沿深度方向进行微小扰动，生成一系列假设的深度值 "),l("code",null,"d_sample"),o("。扰动范围由 "),l("code",null,"DEPTH_NEIGHBORHOOD_RELATIVE_SPAN"),o(" 控制，采样数量为 "),l("code",null,"NUM_DEPTH_NEIGHBORHOOD_SAMPLES"),o("。")]),l("li",null,[o("对于每一个假设的深度 "),l("code",null,"d_sample"),o("，都从参考帧 "),l("code",null,"(u,v)"),o(" 出发构建一个假设的三维点，并将其投影到当前的邻居帧 "),l("code",null,"k"),o(" 的图像上，获取其颜色。")]),l("li",null,[o("计算这个假设投影颜色与 "),l("code",null,"original_color_at_uv"),o(" 的SSD。")]),l("li",null,[o("在所有这些假设投影（包括原始未扰动的投影）的SSD中，找到最小值 "),l("code",null,"min_ssd_in_neighborhood"),o("。")])])]),l("li",null,[l("strong",null,"置信度分数"),o(": "),l("code",null,"confidence_one_neighbor = min_ssd_in_neighborhood / ssd_original_depth_projection"),o("。 "),l("ul",null,[l("li",null,[o("结果被约束在 "),l("span",null,"0,1"),o(" 范围内。")]),l("li",null,[o("直观含义：如果原始深度投影的颜色误差 "),l("code",null,"ssd_original_depth_projection"),o(" 本身就是最小的（或非常接近最小，即 "),l("code",null,"min_ssd_in_neighborhood"),o(" 与其相近），则比值接近1，置信度高。如果通过扰动能在附近找到一个颜色匹配显著更好的深度，说明原始深度可能不太可靠，则比值较小，置信度低。")])])]),l("li",null,[o("累加贡献: "),l("code",null,"total_confidence_score += confidence_one_neighbor"),o(", "),l("code",null,"contributing_neighbor_frames++"),o("。")])])])])],-1)])),_:1,__:[0]},16))}};export{j as default};
